<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’ª ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙŠØ§Ù‚Ø© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for gradients, shadows, and fonts */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter font for a modern look */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* Purple gradient */
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-y: auto; /* Allow scrolling for content that exceeds viewport height */
        }
        /* Hide scrollbar for a cleaner look */
        body::-webkit-scrollbar {
            display: none;
        }
        body {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        /* Custom spinner animation */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #667eea;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-500 to-purple-600 min-h-screen flex items-center justify-center p-4">
    <div class="container bg-white p-8 rounded-2xl shadow-xl max-w-lg w-full">
        <div id="abdominalExercisesPage" class="page">
            <h1 class="text-4xl font-extrabold text-center text-gray-800 mb-8 flex items-center justify-center gap-2">
                ğŸ’ª ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ø¨Ø·Ù† <span class="text-indigo-500">Ù„Ø´Ø¨Ø§Ø¨ Ø£Ù‚ÙˆÙ‰</span>
            </h1>

            <p class="text-center text-gray-600 mb-8">
                Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ù†Ø­Ùˆ Ø¨Ø·Ù† Ù…Ø´Ø¯ÙˆØ¯Ø© ÙˆÙ‚ÙˆÙŠØ© Ù…Ø¹ Ù‡Ø°Ù‡ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ÙØ¹Ø§Ù„Ø©!
            </p>

            <div class="grid grid-cols-1 gap-6">
                <div class="bg-gray-50 p-4 rounded-lg shadow-sm flex items-center gap-4 border-r-4 border-indigo-400">
                    <img src="https://placehold.co/80x80/E0E7FF/4F46E5?text=CR" alt="ØªÙ…Ø±ÙŠÙ† Ø§Ù„ÙƒØ±Ø´" class="rounded-full w-20 h-20 object-cover">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-1">ØªÙ…Ø±ÙŠÙ† Ø§Ù„ÙƒØ±Ø´ (Crunches) ğŸ¤¸â€â™‚ï¸</h3>
                        <p class="text-gray-600 text-sm">
                            ØªÙ…Ø±ÙŠÙ† Ø£Ø³Ø§Ø³ÙŠ ÙŠØ³ØªÙ‡Ø¯Ù Ø¹Ø¶Ù„Ø§Øª Ø§Ù„Ø¨Ø·Ù† Ø§Ù„Ø¹Ù„ÙˆÙŠØ©. Ø§Ø³ØªÙ„Ù‚Ù Ø¹Ù„Ù‰ Ø¸Ù‡Ø±ÙƒØŒ Ø§Ø«Ù†Ù Ø±ÙƒØ¨ØªÙŠÙƒØŒ Ø§Ø±ÙØ¹ Ø¬Ø°Ø¹Ùƒ Ù†Ø­Ùˆ Ø±ÙƒØ¨ØªÙŠÙƒ.
                        </p>
                    </div>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg shadow-sm flex items-center gap-4 border-r-4 border-purple-400">
                    <img src="https://placehold.co/80x80/EDE9FE/7C3AED?text=PL" alt="ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø¨Ù„Ø§Ù†Ùƒ" class="rounded-full w-20 h-20 object-cover">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-1">ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø¨Ù„Ø§Ù†Ùƒ (Plank) â±ï¸</h3>
                        <p class="text-gray-600 text-sm">
                            ÙŠÙ‚ÙˆÙŠ Ø§Ù„Ø¬Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø®Ø§ØµØ© Ø¹Ø¶Ù„Ø§Øª Ø§Ù„Ø¨Ø·Ù† ÙˆØ§Ù„Ø¸Ù‡Ø±. Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¬Ø³Ù…Ùƒ Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù‹ Ù…Ø«Ù„ Ø§Ù„Ù„ÙˆØ­ Ø§Ù„Ø®Ø´Ø¨ÙŠ.
                        </p>
                    </div>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg shadow-sm flex items-center gap-4 border-r-4 border-green-400">
                    <img src="https://placehold.co/80x80/D1FAE5/10B981?text=LR" alt="Ø±ÙØ¹ Ø§Ù„Ø³Ø§Ù‚ÙŠÙ†" class="rounded-full w-20 h-20 object-cover">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-1">Ø±ÙØ¹ Ø§Ù„Ø³Ø§Ù‚ÙŠÙ† (Leg Raises) ğŸ¦µ</h3>
                        <p class="text-gray-600 text-sm">
                            ÙŠØ³ØªÙ‡Ø¯Ù Ø¹Ø¶Ù„Ø§Øª Ø§Ù„Ø¨Ø·Ù† Ø§Ù„Ø³ÙÙ„ÙŠØ©. Ø§Ø³ØªÙ„Ù‚Ù Ø¹Ù„Ù‰ Ø¸Ù‡Ø±Ùƒ ÙˆØ§Ø±ÙØ¹ Ø³Ø§Ù‚ÙŠÙƒ Ù…Ø¹Ø§Ù‹ Ø¨Ø¨Ø·Ø¡.
                        </p>
                    </div>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg shadow-sm flex items-center gap-4 border-r-4 border-yellow-400">
                    <img src="https://placehold.co/80x80/FFFBEB/F59E0B?text=RT" alt="Ø§Ù„ØªÙˆÙŠØ³Øª Ø§Ù„Ø±ÙˆØ³ÙŠ" class="rounded-full w-20 h-20 object-cover">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-1">Ø§Ù„ØªÙˆÙŠØ³Øª Ø§Ù„Ø±ÙˆØ³ÙŠ (Russian Twists) ğŸ”„</h3>
                        <p class="text-gray-600 text-sm">
                            ÙŠÙ‚ÙˆÙŠ Ø¹Ø¶Ù„Ø§Øª Ø§Ù„Ø¨Ø·Ù† Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø§Ù„Ù…Ø§Ø¦Ù„Ø©). Ø§Ø¬Ù„Ø³ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¶ØŒ Ø§Ø±ÙØ¹ Ù‚Ø¯Ù…ÙŠÙƒ Ù‚Ù„ÙŠÙ„Ø§Ù‹ØŒ ÙˆÙ„Ù Ø¬Ø°Ø¹Ùƒ Ù…Ù† Ø¬Ø§Ù†Ø¨ Ù„Ø¢Ø®Ø±.
                        </p>
                    </div>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg shadow-sm flex items-center gap-4 border-r-4 border-red-400">
                    <img src="https://placehold.co/80x80/FEE2E2/EF4444?text=BC" alt="ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø¯Ø±Ø§Ø¬Ø©" class="rounded-full w-20 h-20 object-cover">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-1">ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø¯Ø±Ø§Ø¬Ø© (Bicycle Crunches) ğŸš´</h3>
                        <p class="text-gray-600 text-sm">
                            ØªÙ…Ø±ÙŠÙ† Ø´Ø§Ù…Ù„ Ù„Ù„Ø¨Ø·Ù† ÙŠØ³ØªÙ‡Ø¯Ù Ø§Ù„Ø¹Ø¶Ù„Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ© ÙˆØ§Ù„Ø³ÙÙ„ÙŠØ© ÙˆØ§Ù„Ù…Ø§Ø¦Ù„Ø©. Ø­Ø±Ùƒ Ø³Ø§Ù‚ÙŠÙƒ ÙƒØ£Ù†Ùƒ ØªÙ‚ÙˆØ¯ Ø¯Ø±Ø§Ø¬Ø©.
                        </p>
                    </div>
                </div>
            </div>

            <button id="goToCalculatorBtn" class="w-full p-4 mt-8 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold rounded-lg shadow-lg hover:from-indigo-700 hover:to-purple-800 transition duration-300 transform hover:-translate-y-1">
                Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ© âœ¨
            </button>
        </div>

        <div id="calorieCalculatorPage" class="page hidden">
            <h1 class="text-4xl font-extrabold text-center text-gray-800 mb-8 flex items-center justify-center gap-2">
                ğŸ”¥ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ© <span class="text-indigo-500">Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</span>
            </h1>
            
            <form id="calorieForm" class="space-y-6">
                <div class="form-group">
                    <label for="gender" class="block text-gray-700 font-semibold mb-2">
                        ğŸš» Ø§Ù„Ø¬Ù†Ø³:
                    </label>
                    <select id="gender" required class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500 transition duration-300">
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¬Ù†Ø³</option>
                        <option value="male">Ø°ÙƒØ± â™‚ï¸</option>
                        <option value="female">Ø£Ù†Ø«Ù‰ â™€ï¸</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="age" class="block text-gray-700 font-semibold mb-2">
                        ğŸ‚ Ø§Ù„Ø¹Ù…Ø± (Ø³Ù†Ø©):
                    </label>
                    <input type="number" id="age" min="15" max="80" required 
                           class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500 transition duration-300"
                           placeholder="Ù…Ø«Ø§Ù„: 25">
                </div>
                
                <div class="form-group">
                    <label for="weight" class="block text-gray-700 font-semibold mb-2">
                        âš–ï¸ Ø§Ù„ÙˆØ²Ù† (ÙƒÙŠÙ„ÙˆØ¬Ø±Ø§Ù…):
                    </label>
                    <input type="number" id="weight" min="30" max="300" step="0.1" required 
                           class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500 transition duration-300"
                           placeholder="Ù…Ø«Ø§Ù„: 70.5">
                </div>
                
                <div class="form-group">
                    <label for="height" class="block text-gray-700 font-semibold mb-2">
                        ğŸ“ Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù†ØªÙŠÙ…ØªØ±):
                    </label>
                    <input type="number" id="height" min="140" max="220" required 
                           class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500 transition duration-300"
                           placeholder="Ù…Ø«Ø§Ù„: 175">
                </div>
                
                <div class="form-group">
                    <label for="activity" class="block text-gray-700 font-semibold mb-2">
                        ğŸƒ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ø´Ø§Ø·:
                    </label>
                    <select id="activity" required class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500 transition duration-300">
                        <option value="">Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ø´Ø§Ø·</option>
                        <option value="1.2">Ù‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ© (Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ…Ø§Ø±ÙŠÙ†) ğŸ›‹ï¸</option>
                        <option value="1.375">Ù†Ø´Ø§Ø· Ø®ÙÙŠÙ (ØªÙ…Ø§Ø±ÙŠÙ† Ø®ÙÙŠÙØ© 1-3 Ø£ÙŠØ§Ù…/Ø£Ø³Ø¨ÙˆØ¹) ğŸš¶</option>
                        <option value="1.55">Ù†Ø´Ø§Ø· Ù…ØªÙˆØ³Ø· (ØªÙ…Ø§Ø±ÙŠÙ† Ù…Ø¹ØªØ¯Ù„Ø© 3-5 Ø£ÙŠØ§Ù…/Ø£Ø³Ø¨ÙˆØ¹) ğŸ‹ï¸</option>
                        <option value="1.725">Ù†Ø´Ø§Ø· Ø¹Ø§Ù„ÙŠ (ØªÙ…Ø§Ø±ÙŠÙ† Ø´Ø§Ù‚Ø© 6-7 Ø£ÙŠØ§Ù…/Ø£Ø³Ø¨ÙˆØ¹) ğŸƒâ€â™‚ï¸</option>
                        <option value="1.9">Ù†Ø´Ø§Ø· ÙØ§Ø¦Ù‚ (ØªÙ…Ø§Ø±ÙŠÙ† ØµØ¹Ø¨Ø© Ø¬Ø¯Ø§Ù‹ Ø£Ùˆ Ø¹Ù…Ù„ Ø¬Ø³Ø¯ÙŠ) ğŸš€</option>
                    </select>
                </div>
                
                <button type="submit" class="w-full p-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white font-bold rounded-lg shadow-lg hover:from-indigo-700 hover:to-purple-800 transition duration-300 transform hover:-translate-y-1">
                    Ø§Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ© âœ¨
                </button>
            </form>
            
            <div id="results" class="results mt-8 p-6 bg-gray-50 rounded-xl shadow-inner hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</h2>
                
                <div id="bmi" class="result-item flex justify-between items-center bg-blue-50 p-3 rounded-md mb-3 border-r-4 border-blue-400">
                    <span class="text-gray-700 font-medium">Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù… (BMI):</span>
                    <strong id="bmiValue" class="text-blue-700 text-lg"></strong>
                </div>

                <div id="bmr" class="result-item flex justify-between items-center bg-blue-50 p-3 rounded-md mb-3 border-r-4 border-blue-400">
                    <span class="text-gray-700 font-medium">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø£ÙŠØ¶ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (BMR):</span>
                    <strong id="bmrValue" class="text-blue-700 text-lg"></strong>
                </div>
                <div id="maintenance" class="result-item flex justify-between items-center bg-green-50 p-3 rounded-md mb-3 border-r-4 border-green-400">
                    <span class="text-gray-700 font-medium">Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ²Ù†:</span>
                    <strong id="maintenanceValue" class="text-green-700 text-lg"></strong>
                </div>
                <div id="mildLoss" class="result-item flex justify-between items-center bg-yellow-50 p-3 rounded-md mb-3 border-r-4 border-yellow-400">
                    <span class="text-gray-700 font-medium">Ù„ÙÙ‚Ø¯Ø§Ù† ÙˆØ²Ù† Ø®ÙÙŠÙ (0.25 ÙƒØ¬Ù…/Ø£Ø³Ø¨ÙˆØ¹):</span>
                    <strong id="mildLossValue" class="text-yellow-700 text-lg"></strong>
                </div>
                <div id="moderateLoss" class="result-item flex justify-between items-center bg-orange-50 p-3 rounded-md mb-3 border-r-4 border-orange-400">
                    <span class="text-gray-700 font-medium">Ù„ÙÙ‚Ø¯Ø§Ù† Ø§Ù„ÙˆØ²Ù† (0.5 ÙƒØ¬Ù…/Ø£Ø³Ø¨ÙˆØ¹):</span>
                    <strong id="moderateLossValue" class="text-orange-700 text-lg"></strong>
                </div>
                <div id="severeLoss" class="result-item flex justify-between items-center bg-red-50 p-3 rounded-md mb-3 border-r-4 border-red-400">
                    <span class="text-gray-700 font-medium">Ù„ÙÙ‚Ø¯Ø§Ù† ÙˆØ²Ù† Ø³Ø±ÙŠØ¹ (1 ÙƒØ¬Ù…/Ø£Ø³Ø¨ÙˆØ¹):</span>
                    <strong id="severeLossValue" class="text-red-700 text-lg"></strong>
                </div>
                <div id="mildGain" class="result-item flex justify-between items-center bg-pink-50 p-3 rounded-md mb-3 border-r-4 border-pink-400">
                    <span>Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ²Ù† (0.5 ÙƒØ¬Ù…/Ø£Ø³Ø¨ÙˆØ¹):</span>
                    <strong id="mildGainValue" class="text-pink-700 text-lg"></strong>
                </div>

                <div id="aiAdviceSection" class="mt-8 p-6 bg-purple-50 rounded-xl border-2 border-purple-200 shadow-md">
                    <h3 class="text-xl font-bold text-purple-800 mb-4 text-center flex items-center justify-center gap-2">
                        ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ùƒ:
                    </h3>
                    <div id="aiLoading" class="flex justify-center items-center gap-2 text-purple-600 hidden">
                        <div class="spinner"></div>
                        <span>Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù†ØµØ§Ø¦Ø­...</span>
                    </div>
                    <div id="aiError" class="text-red-600 text-center hidden">
                        Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ù†ØµØ§Ø¦Ø­. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.
                    </div>
                    <div id="aiAdviceContent" class="text-gray-700 leading-relaxed text-right">
                        </div>
                </div>

                <p class="text-sm text-gray-500 mt-6 text-center">
                    âš ï¸ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ù‡ÙŠ ØªÙ‚Ø¯ÙŠØ±ÙŠØ©. Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø®Ø·Ø© ØµØ­ÙŠØ© Ø´Ø®ØµÙŠØ©ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø£Ø®ØµØ§Ø¦ÙŠ ØªØºØ°ÙŠØ© Ø£Ùˆ Ø·Ø¨ÙŠØ¨.
                </p>
                <button id="goToAbdominalBtn" class="w-full p-4 mt-8 bg-gradient-to-r from-gray-600 to-gray-700 text-white font-bold rounded-lg shadow-lg hover:from-gray-700 hover:to-gray-800 transition duration-300 transform hover:-translate-y-1">
                    Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ø¨Ø·Ù† ğŸ”™
                </button>
            </div>
        </div>
    </div>

    <script>
        // Get references to HTML elements for pages
        const abdominalExercisesPage = document.getElementById('abdominalExercisesPage');
        const calorieCalculatorPage = document.getElementById('calorieCalculatorPage');
        const goToCalculatorBtn = document.getElementById('goToCalculatorBtn');
        const goToAbdominalBtn = document.getElementById('goToAbdominalBtn');

        // Get references to HTML elements for calorie calculator
        const calorieForm = document.getElementById('calorieForm');
        const resultsDiv = document.getElementById('results');
        const bmrValue = document.getElementById('bmrValue');
        const maintenanceValue = document.getElementById('maintenanceValue');
        const mildLossValue = document.getElementById('mildLossValue');
        const moderateLossValue = document.getElementById('moderateLossValue');
        const severeLossValue = document.getElementById('severeLossValue');
        const mildGainValue = document.getElementById('mildGainValue');
        const bmiValue = document.getElementById('bmiValue');
        const aiAdviceSection = document.getElementById('aiAdviceSection');
        const aiLoading = document.getElementById('aiLoading');
        const aiError = document.getElementById('aiError');
        const aiAdviceContent = document.getElementById('aiAdviceContent');

        // Function to show a specific page and hide others
        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                if (page.id === pageId) {
                    page.classList.remove('hidden');
                } else {
                    page.classList.add('hidden');
                }
            });
        }

        // Event listeners for page navigation buttons
        goToCalculatorBtn.addEventListener('click', () => showPage('calorieCalculatorPage'));
        goToAbdominalBtn.addEventListener('click', () => showPage('abdominalExercisesPage'));

        // Initially show the abdominal exercises page
        showPage('abdominalExercisesPage');

        // Add event listener for calorie form submission
        calorieForm.addEventListener('submit', async function(e) {
            e.preventDefault(); // Prevent default form submission (page reload)
            
            // Get input values from the calorie calculator form
            const gender = document.getElementById('gender').value;
            const age = parseFloat(document.getElementById('age').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const activity = parseFloat(document.getElementById('activity').value);
            
            // Calculate Basal Metabolic Rate (BMR) using Mifflin-St Jeor equation
            // BMR: calories burned at rest to maintain basic bodily functions
            let bmr;
            if (gender === 'male') {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
            } else {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
            }
            
            // Calculate total daily energy expenditure (TDEE) based on activity level
            const maintenance = bmr * activity; // Calories to maintain current weight
            
            // Calculate calorie targets for weight management
            // Approximations based on 7700 calories per 1 kg of fat
            const mildLoss = maintenance - 250; // ~0.25 kg/week loss
            const moderateLoss = maintenance - 500; // ~0.5 kg/week loss
            const severeLoss = maintenance - 1000; // ~1 kg/week loss (consult professional)
            const mildGain = maintenance + 500; // ~0.5 kg/week gain
            
            // Calculate Body Mass Index (BMI)
            // BMI = weight (kg) / (height (m))^2
            const heightInMeters = height / 100;
            const bmi = weight / (heightInMeters * heightInMeters);

            // Display results
            bmrValue.textContent = `${Math.round(bmr)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©`;
            maintenanceValue.textContent = `${Math.round(maintenance)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©`;
            mildLossValue.textContent = `${Math.round(mildLoss)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©`;
            moderateLossValue.textContent = `${Math.round(moderateLoss)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©`;
            severeLossValue.textContent = `${Math.round(severeLoss)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©`;
            mildGainValue.textContent = `${Math.round(mildGain)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©`;
            
            // Display BMI with interpretation
            let bmiInterpretation = '';
            if (bmi < 18.5) {
                bmiInterpretation = ' (Ù†Ù‚Øµ Ø§Ù„ÙˆØ²Ù† ğŸ“‰)';
            } else if (bmi >= 18.5 && bmi < 24.9) {
                bmiInterpretation = ' (ÙˆØ²Ù† ØµØ­ÙŠ âœ…)';
            } else if (bmi >= 25 && bmi < 29.9) {
                bmiInterpretation = ' (Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ²Ù† âš ï¸)';
            } else {
                bmiInterpretation = ' (Ø³Ù…Ù†Ø© ğŸš¨)';
            }
            bmiValue.textContent = `${bmi.toFixed(2)}${bmiInterpretation}`;

            resultsDiv.classList.remove('hidden'); // Show results section

            // --- AI Advice Generation ---
            // Clear previous AI advice and show loading spinner
            aiAdviceContent.innerHTML = '';
            aiError.classList.add('hidden');
            aiLoading.classList.remove('hidden');
            aiAdviceSection.classList.remove('hidden'); // Ensure AI section is visible

            try {
                // Construct the prompt for the AI model
                const prompt = `Ø£Ù†Øª Ø®Ø¨ÙŠØ± ØªØºØ°ÙŠØ© ÙˆÙ„ÙŠØ§Ù‚Ø© Ø¨Ø¯Ù†ÙŠØ©. Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©ØŒ Ù‚Ø¯Ù… Ù†ØµØ§Ø¦Ø­ Ø´Ø®ØµÙŠØ© ÙˆØ´Ø§Ù…Ù„Ø© Ù„Ù†Ù…Ø· Ø­ÙŠØ§Ø© ØµØ­ÙŠØŒ Ù…Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„ØªØºØ°ÙŠØ© ÙˆØ§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©ØŒ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ©. Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø´Ø¨Ø§Ø¨.
                
                Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:
                - Ø§Ù„Ø¬Ù†Ø³: ${gender === 'male' ? 'Ø°ÙƒØ±' : 'Ø£Ù†Ø«Ù‰'}
                - Ø§Ù„Ø¹Ù…Ø±: ${age} Ø³Ù†Ø©
                - Ø§Ù„ÙˆØ²Ù†: ${weight} ÙƒØ¬Ù…
                - Ø§Ù„Ø·ÙˆÙ„: ${height} Ø³Ù…
                - Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ø´Ø§Ø·: ${document.getElementById('activity').options[document.getElementById('activity').selectedIndex].text.split('(')[0].trim()} (Ù…Ø¹Ø§Ù…Ù„ ${activity})
                - Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù… (BMI): ${bmi.toFixed(2)} ${bmiInterpretation}
                - Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø£ÙŠØ¶ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (BMR): ${Math.round(bmr)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©
                - Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ²Ù†: ${Math.round(maintenance)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©
                - Ø³Ø¹Ø±Ø§Øª ÙÙ‚Ø¯Ø§Ù† ÙˆØ²Ù† Ø®ÙÙŠÙ (0.25 ÙƒØ¬Ù…/Ø£Ø³Ø¨ÙˆØ¹): ${Math.round(mildLoss)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©
                - Ø³Ø¹Ø±Ø§Øª ÙÙ‚Ø¯Ø§Ù† Ø§Ù„ÙˆØ²Ù† (0.5 ÙƒØ¬Ù…/Ø£Ø³Ø¨ÙˆØ¹): ${Math.round(moderateLoss)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©
                - Ø³Ø¹Ø±Ø§Øª ÙÙ‚Ø¯Ø§Ù† ÙˆØ²Ù† Ø³Ø±ÙŠØ¹ (1 ÙƒØ¬Ù…/Ø£Ø³Ø¨ÙˆØ¹): ${Math.round(severeLoss)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©
                - Ø³Ø¹Ø±Ø§Øª Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ²Ù† (0.5 ÙƒØ¬Ù…/Ø£Ø³Ø¨ÙˆØ¹): ${Math.round(mildGain)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©

                Ù‚Ø¯Ù… Ù†ØµØ§Ø¦Ø­Ùƒ ÙÙŠ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ØªØ§Ù„ÙŠØ©:
                1.  **Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ ØµØ­ØªÙƒ:** ØªØ­Ù„ÙŠÙ„ Ù…ÙˆØ¬Ø² Ù„ÙˆØ¶Ø¹Ù‡Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ BMI ÙˆØ§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©.
                2.  **Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØªØºØ°ÙŠØ©:** Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ²Ù† ÙˆÙÙ‚Ø¯Ø§Ù†/Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ²Ù†.
                3.  **Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†:** ØªÙˆØµÙŠØ§Øª Ø¹Ø§Ù…Ø© Ù„Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø¨Ø¯Ù†ÙŠ.
                4.  **Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ©:** ØªØ´Ø¬ÙŠØ¹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ©.
                
                Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø±Ø¯ Ù…ÙˆØ¬Ø²Ù‹Ø§ ÙˆÙˆØ§Ø¶Ø­Ù‹Ø§ ÙˆÙ…Ù‚Ø³Ù…Ù‹Ø§ Ø¥Ù„Ù‰ Ù†Ù‚Ø§Ø· Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙ†Ø³ÙŠÙ‚ Markdown.`;

                // Prepare chat history for the API call
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                const payload = { contents: chatHistory };
                const apiKey = ""; // API key will be provided by the Canvas environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                // Make the API call to Gemini
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json(); // Parse the JSON response

                // Check if the response contains valid content
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const aiText = result.candidates[0].content.parts[0].text;
                    aiAdviceContent.innerHTML = formatMarkdownToHtml(aiText); // Display AI advice
                } else {
                    aiError.classList.remove('hidden'); // Show error if no content
                    console.error('AI response structure unexpected:', result);
                }

            } catch (error) {
                aiError.classList.remove('hidden'); // Show error on API call failure
                console.error('Error fetching AI advice:', error);
            } finally {
                aiLoading.classList.add('hidden'); // Hide loading spinner
            }
        });

        // Helper function to convert basic markdown to HTML for display
        function formatMarkdownToHtml(markdownText) {
            let html = markdownText;
            // Convert bold text
            html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            // Convert headings (assuming ## or ### for simplicity, can be expanded)
            html = html.replace(/^### (.*$)/gim, '<h3>$1</h3>');
            html = html.replace(/^## (.*$)/gim, '<h2>$1</h2>');
            // Convert lists
            html = html.replace(/^\* (.*$)/gim, '<li>$1</li>');
            html = html.replace(/^(?!<li|<\/li>)(.+)$/gim, '<p>$1</p>'); // Wrap remaining lines in paragraphs

            // Basic cleanup for markdown list conversion
            html = html.replace(/<\/li>\n<li>/g, '</li><li>');
            html = html.replace(/<\/ul><ul>/g, ''); // Prevent multiple ul tags if markdown has multiple lists

            // Replace newlines with <br> for general text, but not inside block elements
            html = html.replace(/(?<!<\/h[1-6]>)(?<!<\/li>)(?<!<\/p>)\n(?!<h[1-6]>)(?!<li>)(?!<p>)/g, '<br>');

            return html;
        }
    </script>
</body>
</html>
